import{u as b,r as a,j as e,a as d}from"./app-13cb7e5f.js";import{L as g}from"./Layout-efe40720.js";/* empty css            */function C(){const{flash:t}=b().props,[l,o]=a.useState(null),[n,c]=a.useState(!1);a.useEffect(()=>{let r=0,s=!1;const m=i=>{window.scrollY===0&&(r=i.touches[0].pageY,s=!0)},u=i=>{if(!s)return;i.touches[0].pageY-r>100&&(s=!1,d.reload())},x=()=>{s=!1};return document.addEventListener("touchstart",m),document.addEventListener("touchmove",u),document.addEventListener("touchend",x),()=>{document.removeEventListener("touchstart",m),document.removeEventListener("touchmove",u),document.removeEventListener("touchend",x)}},[]);const h=r=>{const s=r.target.files[0];o(s)},p=r=>{if(r.preventDefault(),!l){alert("Please select a file to upload");return}c(!0);const s=new FormData;s.append("file",l),d.post("/achievements/import",s,{onFinish:()=>{c(!1),o(null)}})};return e.jsx(g,{children:e.jsxs("div",{className:"py-4 max-w-4xl mx-auto",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Import Achievements from CSV"}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("form",{onSubmit:p,children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Upload CSV File"}),e.jsx("input",{type:"file",accept:".csv,.txt",onChange:h,className:"w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"}),l&&e.jsx("div",{className:"mt-2 text-sm text-green-600",children:e.jsxs("p",{className:"font-semibold",children:["Selected: ",l.name]})})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("h3",{className:"font-medium text-blue-900 mb-3",children:"📋 CSV Format (Fixed Column Order)"}),e.jsxs("div",{className:"space-y-3 text-sm text-blue-800",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium mb-1",children:"Required Column Order:"}),e.jsx("code",{className:"bg-white px-2 py-1 rounded text-xs block",children:"Column A: Membership Number | Column B: Competition Class | Column C: Achievement (Medal) | Column D: Competition Name"})]}),e.jsxs("div",{className:"bg-white rounded p-3 mt-2",children:[e.jsx("p",{className:"font-medium mb-2",children:"Example CSV:"}),e.jsxs("code",{className:"text-xs block",children:[e.jsx("span",{className:"text-gray-500",children:"Any Header,Any Header,Any Header,Any Header"}),e.jsx("br",{}),"4,SM Premier Mixed 500m,GOLD,National 2025",e.jsx("br",{}),"5,SM Premier Mixed 200m,SILVER,National 2025"]})]}),e.jsxs("div",{className:"bg-yellow-50 border border-yellow-300 rounded p-2 mt-2",children:[e.jsx("p",{className:"font-medium",children:"✨ Import Features:"}),e.jsxs("ul",{className:"list-disc ml-5 mt-1",children:[e.jsx("li",{children:"First row is automatically skipped (headers don't matter)"}),e.jsx("li",{children:"Columns must be in exact order: A, B, C, D"}),e.jsx("li",{children:"Matches members by membership number (Column A)"}),e.jsx("li",{children:'Automatically extracts year from Competition Name (e.g., "National 2025" → 2025)'}),e.jsx("li",{children:"Medal types: GOLD, SILVER, BRONZE (Column C)"}),e.jsx("li",{children:"Duplicate prevention (updates existing achievements)"})]})]})]})]}),e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-3",children:"📝 Column Mapping (Fixed)"}),e.jsxs("ul",{className:"space-y-2 text-sm text-gray-700",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Column A"})," → Membership Number (must exist in system)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Column B"})," → Competition Class/Category"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Column C"})," → Achievement (GOLD, SILVER, or BRONZE)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Column D"})," → Competition Name (include year in name)"]})]})]}),e.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:[e.jsx("h3",{className:"font-medium text-orange-900 mb-2",children:"⚠️ Important Notes"}),e.jsxs("ul",{className:"text-sm text-orange-800 space-y-1",children:[e.jsxs("li",{children:["• This will ",e.jsx("strong",{children:"CREATE or UPDATE"})," achievement records"]}),e.jsx("li",{children:"• Ensure all membership numbers exist in the system"}),e.jsx("li",{children:"• First row must contain column headers"}),e.jsx("li",{children:"• Rows with missing data will be skipped"})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>d.get("/my-achievements"),className:"px-6 py-2 border border-gray-300 rounded-md hover:bg-gray-50",disabled:n,children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-blue-300 disabled:cursor-not-allowed",disabled:n||!l,children:n?"Importing...":"Import Achievements"})]})]})}),(t==null?void 0:t.success)&&e.jsx("div",{className:"mt-6 bg-green-50 border border-green-200 rounded-lg p-4",children:e.jsx("p",{className:"text-green-800",children:t.success})}),(t==null?void 0:t.error)&&e.jsx("div",{className:"mt-6 bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsx("p",{className:"text-red-800",children:t.error})})]})]})})}export{C as default};
