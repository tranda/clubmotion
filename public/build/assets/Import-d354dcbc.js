import{u as p,r as a,j as e,a as d}from"./app-019d6ec1.js";import{L as g}from"./Layout-487c66e0.js";/* empty css            */function E(){const{flash:t}=p().props,[l,c]=a.useState(null),[n,o]=a.useState(!1);a.useEffect(()=>{let r=0,s=!1;const m=i=>{window.scrollY===0&&(r=i.touches[0].pageY,s=!0)},x=i=>{if(!s)return;i.touches[0].pageY-r>100&&(s=!1,d.reload())},u=()=>{s=!1};return document.addEventListener("touchstart",m),document.addEventListener("touchmove",x),document.addEventListener("touchend",u),()=>{document.removeEventListener("touchstart",m),document.removeEventListener("touchmove",x),document.removeEventListener("touchend",u)}},[]);const h=r=>{const s=r.target.files[0];c(s)},b=r=>{if(r.preventDefault(),!l){alert("Please select a file to upload");return}o(!0);const s=new FormData;s.append("file",l),d.post("/achievements/import",s,{onFinish:()=>{o(!1),c(null)}})};return e.jsx(g,{children:e.jsxs("div",{className:"py-4 max-w-4xl mx-auto",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Import Achievements from CSV"}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("form",{onSubmit:b,children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Upload CSV File"}),e.jsx("input",{type:"file",accept:".csv,.txt",onChange:h,className:"w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"}),l&&e.jsx("div",{className:"mt-2 text-sm text-green-600",children:e.jsxs("p",{className:"font-semibold",children:["Selected: ",l.name]})})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("h3",{className:"font-medium text-blue-900 mb-3",children:"📋 CSV Format"}),e.jsxs("div",{className:"space-y-3 text-sm text-blue-800",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium mb-1",children:"Expected Format:"}),e.jsx("code",{className:"bg-white px-2 py-1 rounded text-xs block",children:"membership_number, competition class, medal, Event name"})]}),e.jsxs("div",{className:"bg-white rounded p-3 mt-2",children:[e.jsx("p",{className:"font-medium mb-2",children:"Example:"}),e.jsxs("code",{className:"text-xs block",children:["membership_number,competition class,medal,Event name",e.jsx("br",{}),"4,SM Premier Mixed 500m,GOLD,National 2025",e.jsx("br",{}),"5,SM Premier Mixed 200m,SILVER,National 2025"]})]}),e.jsxs("div",{className:"bg-yellow-50 border border-yellow-300 rounded p-2 mt-2",children:[e.jsx("p",{className:"font-medium",children:"✨ Import Features:"}),e.jsxs("ul",{className:"list-disc ml-5 mt-1",children:[e.jsx("li",{children:"Matches members by membership number"}),e.jsx("li",{children:'Automatically extracts year from Event name (e.g., "National 2025" → 2025)'}),e.jsx("li",{children:"Medal types: GOLD, SILVER, BRONZE"}),e.jsx("li",{children:"Duplicate prevention (updates existing achievements)"})]})]})]})]}),e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-3",children:"📝 Column Details"}),e.jsxs("ul",{className:"space-y-2 text-sm text-gray-700",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"membership_number"})," → Member's ID (must exist in system)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"competition class"})," → Competition category/class"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"medal"})," → GOLD, SILVER, or BRONZE"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Event name"})," → Event/competition name (include year)"]})]})]}),e.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:[e.jsx("h3",{className:"font-medium text-orange-900 mb-2",children:"⚠️ Important Notes"}),e.jsxs("ul",{className:"text-sm text-orange-800 space-y-1",children:[e.jsxs("li",{children:["• This will ",e.jsx("strong",{children:"CREATE or UPDATE"})," achievement records"]}),e.jsx("li",{children:"• Ensure all membership numbers exist in the system"}),e.jsx("li",{children:"• First row must contain column headers"}),e.jsx("li",{children:"• Rows with missing data will be skipped"})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>d.get("/my-achievements"),className:"px-6 py-2 border border-gray-300 rounded-md hover:bg-gray-50",disabled:n,children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-blue-300 disabled:cursor-not-allowed",disabled:n||!l,children:n?"Importing...":"Import Achievements"})]})]})}),(t==null?void 0:t.success)&&e.jsx("div",{className:"mt-6 bg-green-50 border border-green-200 rounded-lg p-4",children:e.jsx("p",{className:"text-green-800",children:t.success})}),(t==null?void 0:t.error)&&e.jsx("div",{className:"mt-6 bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsx("p",{className:"text-red-800",children:t.error})})]})]})})}export{E as default};
