import{a as x,r as i,j as e,b as n}from"./app-4a4d461a.js";import{L as h}from"./Layout-dbe0fb0b.js";/* empty css            */function j({availableYears:d}){const{flash:r}=x().props,[a,m]=i.useState(new Date().getFullYear()),[t,o]=i.useState(null),c=s=>{if(s.preventDefault(),!t){alert("Please select a CSV file to import");return}const l=new FormData;l.append("year",a),l.append("csv_file",t),n.post("/payments/import",l,{forceFormData:!0})};return e.jsx(h,{children:e.jsxs("div",{className:"py-4 max-w-4xl mx-auto",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Import Payments from CSV"}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("form",{onSubmit:c,children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Year"}),e.jsx("select",{value:a,onChange:s=>m(s.target.value),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:d.map(s=>e.jsx("option",{value:s,children:s},s))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Upload CSV File"}),e.jsx("input",{type:"file",accept:".csv,.txt",onChange:s=>o(s.target.files[0]),className:"w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"}),t&&e.jsxs("p",{className:"mt-2 text-sm text-green-600",children:["Selected: ",t.name]})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("h3",{className:"font-medium text-blue-900 mb-3",children:"ðŸ“‹ CSV Format Options"}),e.jsxs("div",{className:"space-y-3 text-sm text-blue-800",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium mb-1",children:"Option 1 (Email only):"}),e.jsx("code",{className:"bg-white px-2 py-1 rounded text-xs",children:"Email, JAN_2025, FEB_2025, MAR_2025, ..."})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium mb-1",children:"Option 2 (Membership Number only):"}),e.jsx("code",{className:"bg-white px-2 py-1 rounded text-xs",children:"Membership_Number, JAN_2025, FEB_2025, MAR_2025, ..."})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium mb-1",children:"Option 3 (Both - Recommended):"}),e.jsx("code",{className:"bg-white px-2 py-1 rounded text-xs block",children:"Email, Membership_Number, JAN_2025, FEB_2025, MAR_2025, ..."})]})]})]}),e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-3",children:"ðŸ“ Cell Values"}),e.jsxs("ul",{className:"space-y-2 text-sm text-gray-700",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Numbers"})," (e.g., 2500, 1000) â†’ Marked as ",e.jsx("span",{className:"text-green-600 font-semibold",children:"paid"})]}),e.jsxs("li",{children:[e.jsx("strong",{children:'"pocasni"'})," â†’ Marked as ",e.jsx("span",{className:"text-gray-600 font-semibold",children:"exempt"})," (honorary member)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:'"saradnik"'})," â†’ Marked as ",e.jsx("span",{className:"text-gray-600 font-semibold",children:"exempt"})," (associate)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Empty"})," â†’ Marked as ",e.jsx("span",{className:"text-yellow-600 font-semibold",children:"pending"})]})]})]}),e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[e.jsx("h3",{className:"font-medium text-yellow-900 mb-2",children:"ðŸ” Member Matching Priority"}),e.jsxs("ol",{className:"text-sm text-yellow-800 space-y-1 list-decimal list-inside",children:[e.jsxs("li",{children:["Try to match by ",e.jsx("strong",{children:"Email"})," (if provided in CSV)"]}),e.jsxs("li",{children:["If not found, match by ",e.jsx("strong",{children:"Membership Number"})]}),e.jsx("li",{children:"If neither matches, skip row and log error"})]})]}),e.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:[e.jsx("h3",{className:"font-medium text-orange-900 mb-2",children:"âš ï¸ Important Notes"}),e.jsxs("ul",{className:"text-sm text-orange-800 space-y-1",children:[e.jsxs("li",{children:["â€¢ This will ",e.jsx("strong",{children:"UPDATE"})," existing payment records if they exist"]}),e.jsx("li",{children:"â€¢ Maximum file size: 5 MB"}),e.jsx("li",{children:"â€¢ Ensure all member emails/numbers exist in the system"})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>n.get("/payments"),className:"px-6 py-2 border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Import Payments"})]})]})}),(r==null?void 0:r.import_errors)&&r.import_errors.length>0&&e.jsxs("div",{className:"mt-6 bg-red-50 border border-red-200 rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-red-900 mb-2",children:"Import Errors:"}),e.jsx("ul",{className:"text-sm text-red-800 space-y-1",children:r.import_errors.map((s,l)=>e.jsxs("li",{children:["â€¢ ",s]},l))})]})]})]})})}export{j as default};
